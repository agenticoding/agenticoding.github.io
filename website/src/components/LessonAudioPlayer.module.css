/* Strip container — only track color uses a var; thumb uses explicit per-selector values */
.strip {
  --track-filled-color: var(--border-default);

  display: flex;
  align-items: center;
  gap: var(--space-2);
  height: 40px;
  margin: var(--space-4) 0;
  border-top: 1px solid var(--border-subtle);
  border-bottom: 1px solid var(--border-subtle);
  font-family: var(--font-body);
  font-size: var(--text-sm);
  color: var(--text-muted);
}

.strip[data-playing] {
  --track-filled-color: var(--visual-cyan);
}

/* Play / Pause — borderless inline icon, blends with strip */
.playButton {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding: 0;
  color: var(--text-muted);
  cursor: pointer;
  flex-shrink: 0;
  line-height: 1;
  transition: color 0.15s ease;
}
.playButton:hover {
  color: var(--text-body);
}
.playButton:active {
  color: var(--text-heading);
}

/* Headphone icon — always visible */
.idleIcon {
  display: inline-flex;
  align-items: center;
  color: var(--text-muted);
  flex-shrink: 0;
}

/* Label — stays in place, color shifts subtly when playing */
.labelText {
  color: var(--text-muted);
  transition: color 300ms ease;
}
.strip[data-playing] .labelText {
  color: var(--text-body);
}

/* Seek bar — flat, no box-shadow. Filled color driven by state var. */
.seekBar {
  flex: 1;
  height: 2px;
  appearance: none;
  background: linear-gradient(
    to right,
    var(--track-filled-color) var(--seek-progress, 0%),
    var(--border-subtle) var(--seek-progress, 0%)
  );
  border: none;
  outline: none;
  cursor: pointer;
}

/* Smooth Circuit thumb — explicit idle values; no var() intermediary so Safari
   can observe the property change and fire transitions correctly */
.seekBar::-webkit-slider-thumb {
  appearance: none;
  width: 12px;
  height: 12px;
  border-radius: var(--radius-full);
  background: var(--text-muted);
  cursor: pointer;
  transform: scale(0.6);
  transition: background 200ms ease, transform 200ms ease;
  will-change: transform;
}
.seekBar::-moz-range-thumb {
  width: 12px;
  height: 12px;
  border: none;
  border-radius: var(--radius-full);
  background: var(--text-muted);
  cursor: pointer;
  transform: scale(0.6);
  transition: background 200ms ease, transform 200ms ease;
  will-change: transform;
}
.seekBar::-moz-range-track {
  height: 2px;
  background: var(--border-subtle);
  border: none;
}

/* Playing: explicit values on pseudo-element selectors, not via var() on ancestor.
   Safari requires the cascade itself to change the property value for transitions to fire.
   animation-delay matches transition duration so scale-up finishes before pulse starts. */
.strip[data-playing] .seekBar::-webkit-slider-thumb {
  background: var(--visual-cyan);
  transform: scale(1);
  animation: thumbPulse 2s ease-in-out infinite;
  animation-delay: 200ms;
}
.strip[data-playing] .seekBar::-moz-range-thumb {
  background: var(--visual-cyan);
  transform: scale(1);
  animation: thumbPulse 2s ease-in-out infinite;
  animation-delay: 200ms;
}

@keyframes thumbPulse {
  0%, 100% { transform: scale(1); }
  50%       { transform: scale(1.2); }
}

/* Time */
.timeDisplay {
  font-size: var(--text-sm);
  font-variant-numeric: tabular-nums;
  color: var(--text-muted);
  white-space: nowrap;
  flex-shrink: 0;
}

/* Speed toggles — Krypton voice for technical taxonomy labels */
.speedButtons {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  flex-shrink: 0;
}
.rateInactive,
.rateActive {
  background: none;
  border: none;
  padding: 0;
  font-family: var(--font-mono-keyword);
  font-size: var(--text-xs);
  font-feature-settings: var(--font-mono-features);
  cursor: pointer;
  line-height: var(--lh-sm);
}
.rateInactive { color: var(--text-muted); }
.rateActive   { color: var(--text-heading); font-weight: 600; }
.rateInactive:hover { color: var(--text-body); }

/* Mobile: hide secondary controls, preserve core play + scrub */
@media (max-width: 600px) {
  .labelText,
  .timeDisplay,
  .speedButtons { display: none; }
}

/* Reduced motion — instant state switches, no animation */
@media (prefers-reduced-motion: reduce) {
  .seekBar::-webkit-slider-thumb,
  .seekBar::-moz-range-thumb {
    transition: none !important;
    animation: none !important;
  }
  .strip[data-playing] .seekBar::-webkit-slider-thumb,
  .strip[data-playing] .seekBar::-moz-range-thumb {
    animation: none !important;
  }
}
